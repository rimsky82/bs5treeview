/*
 @preserve
 bstreeview.js
 Version: 1.2.0
 Authors: Sami CHNITER <sami.chniter@gmail.com>
 Copyright 2020
 License: Apache License 2.0
 Project: https://github.com/chniter/bstreeview
*/
!function(t,e,i,s){"use strict";var n="bstreeview",a={expandIcon:"fa fa-angle-down fa-fw",collapseIcon:"fa fa-angle-right fa-fw",expandClass:"show",indent:1.25,parentsMarginLeft:"1.25rem",openNodeLinkOnNewTab:!0},d={treeview:'<div class="bstreeview"></div>',treeviewItem:'<div role="treeitem" class="list-group-item" data-bs-toggle="collapse"></div>',treeviewGroupItem:'<div role="group" class="list-group collapse" id="itemid"></div>',treeviewItemStateIcon:'<i class="state-icon"></i>',treeviewItemIcon:'<i class="item-icon"></i>'};function r(e,i){this.element=e,this.itemIdPrefix=e.id+"-item-",this.settings=t.extend({},a,i),this.init()}t.extend(r.prototype,{init:function(){this.tree=[],this.nodes=[],this.settings.data&&(this.settings.data.isPrototypeOf(String)&&(this.settings.data=t.parseJSON(this.settings.data)),this.tree=t.extend(!0,[],this.settings.data),delete this.settings.data),t(this.element).addClass("bstreeview"),this.initData({nodes:this.tree});var i=this;this.build(t(this.element),this.tree,0),t(this.element).on("click",".list-group-item",function(s){t(".state-icon",this).toggleClass(i.settings.expandIcon).toggleClass(i.settings.collapseIcon),s.target.hasAttribute("href")?i.settings.target?e.open(s.target.getAttribute("href"),i.settings.target):i.settings.openNodeLinkOnNewTab?e.open(s.target.getAttribute("href"),"_blank"):e.location=s.target.getAttribute("href"):t(t(this).attr("data-bs-target")).collapse("toggle")})},initData:function(e){if(e.nodes){var i=e,s=this;t.each(e.nodes,function t(e,n){n.nodeId=s.nodes.length,n.parentId=i.nodeId,s.nodes.push(n),n.nodes&&s.initData(n)})}},build:function(e,i,s){var n=this,a=n.settings.parentsMarginLeft;s>0&&(a=(n.settings.indent+s*n.settings.indent).toString()+"rem;"),s+=1,t.each(i,function i(r,o){var l=t(d.treeviewItem).attr("data-bs-target","#"+n.itemIdPrefix+o.nodeId).attr("style","padding-left:"+a).attr("aria-level",s);if(o.nodes){var g=t(d.treeviewItemStateIcon).addClass(o.expanded?n.settings.expandIcon:n.settings.collapseIcon);l.append(g)}if(o.icon){var c=t(d.treeviewItemIcon).addClass(o.icon);l.append(c)}if(l.append(o.text),o.href&&l.attr("href",o.href),o.class&&l.addClass(o.class),o.id&&l.attr("id",o.id),e.append(l),o.nodes){var h=t(d.treeviewGroupItem).attr("id",n.itemIdPrefix+o.nodeId);e.append(h),n.build(h,o.nodes,s),o.expanded&&h.addClass(n.settings.expandClass)}})}}),t.fn[n]=function(e){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new r(this,e))})}}(jQuery,window,document);
